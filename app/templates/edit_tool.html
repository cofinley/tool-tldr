{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Edit {{ tool.name }}{% endblock %}

{% block content %}
<div class="page-header">
	<h1>Edit <a href="/tools/{{ tool.id }}">{{ tool.name }}</a></h1>
</div>

<div class="row">
	<form class="col-md-4" method="post" role="form">
	    {{ form.hidden_tag() }}
	    {{ wtf.form_errors(form, hiddens="only") }}

	    {{ wtf.form_field(form.name) }}
			{% if is_confirmed %}
				<div class="mb-3 mt-4">
						{{ wtf.form_field(form.move_parent, checked=False) }}
					</div>
					<div id="optional_parent_field" class="initially-hidden-field">
						{{ wtf.form_field(form.parent_category, readonly=True, placeholder="Pick a category from the tree") }}
					</div>
			{% endif %}

	    {{ wtf.form_field(form.avatar_url) }}

	    {{ wtf.form_field(form.env, help_text="In what environment is this tool used? Usually, this is a programming lanugage.") }}
			<div class="form-group required">
				<label for="created" class="col-form-label">Date Created</label>
				<input class="form-control" id="created" name="created" placeholder="" required type="date"
				       value="{{ form.created.data }}">
			</div>
	    {{ wtf.form_field(form.project_version) }}
	    {{ wtf.form_field(form.is_active) }}
	    {{ wtf.form_field(form.link) }}
	    {{ wtf.form_field(form.why, help_text="Why use this tool over an alternative?") }}
	    {{ wtf.form_field(form.edit_msg) }}
	    {% if not is_confirmed %}
	        <div id="edit-tool-recaptcha" class="my-3">
	          {{ form.recaptcha }}
	        </div>
	    {% endif %}
	    <div class="d-flex justify-content-end mb-5">
	        <button type="button" class="btn btn-danger mr-auto form-button" onclick="goBack()">Cancel</button>
	        <input class="btn btn-success form-button" id="submit" name="submit" type="submit" value="Submit">
	    </div>
	</form>
	{% if is_confirmed %}
		<div id="tree-pane" class="col-md-7" style="display: none">
			<label>Pick a parent category</label>
			<div id="explore-tree" data-url="/explore_nodes?no-link=true"></div>
		</div>
	{% endif %}
</div>
{% endblock %}
